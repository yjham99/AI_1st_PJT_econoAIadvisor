🛡️ 작전명: '센티널 프로토콜' (Sentinel Protocol)
계획의 핵심은 "단순 시세 체크는 가벼운 파이썬 코드가, 심층 분석은 AI 참모진이" 수행하는 이원화 구조입니다.

1. 효율적인 모니터링 관리 (Add/Delete 기능)
데이터 트래픽을 줄이기 위해 감시 대상을 '유동적'으로 관리합니다.

동적 리스트 관리: .json 또는 .db 파일을 활용해 현재 감시 중인 종목 리스트를 관리합니다.

텔레그램 명령 체계:

/add 삼성전자 80000: 삼성전자가 8만원 도달 시 알림 설정.

/del 삼성전자: 감시 리스트에서 즉시 제거.

/list: 현재 감시 중인 모든 종목과 목표가 확인.

2. 토큰 및 트래픽 과부하 방지 설계 (Anti-Ban & Saving)
계정 정지 및 비용 폭탄을 막기 위한 3중 필터를 적용합니다.

필터 1: 로컬 연산 (LLM 사용 0%)

키움 API로부터 받은 시세가 목표가에 도달했는지 확인하는 작업은 100% 로컬 파이썬 코드(if price >= target)로 처리합니다. 이 단계에서는 LLM 토큰을 단 1개도 사용하지 않습니다.

필터 2: 데이터 쓰로틀링 (Throttling)

시세를 1초 단위로 요청하는 대신, 종목의 변동성에 따라 3초~10초 간격으로 조절합니다. (키움 API의 과도한 조회 요청으로 인한 계정 차단 방지)

필터 3: 조건부 AI 분석 (LLM 사용 1%)

목표가에 도달했을 때만 **캐빈(참모총장)**이나 김대리(트레이딩) 페르소나를 호출합니다.

"가격 도달!"이라는 단순 알림은 파이썬이 보내고, "지금 수급 상황을 보니 추가 돌파가 가능합니다"라는 전문 분석이 필요할 때만 AI가 개입합니다.

3. 시스템 아키텍처 (Command Chain)
감시탑 (Kiwoom Loop): 파이썬이 키움 API와 통신하며 시세 수집.

검문소 (Filter Logic): 설정된 가격 조건에 맞지 않으면 즉시 폐기 (자원 절약).

보고 (Telegram Bot): 조건 충족 시 텔레그램으로 즉시 알림 전송.

심층 보고 (On-Demand AI): 지휘관님이 텔레그램에서 /analysis 명령어를 칠 때만 AI 참모진이 분석 수행.

👥 참모진의 역할 분담
정차장 (운영리스크): 키움 API 요청 횟수를 모니터링하며, 제한치에 근접하면 자동으로 조회 간격을 늘려 계정 정지를 방지합니다.

김대리 (트레이딩): 가격 도달 시 단순 알림이 아닌, 당시의 체결 강도를 함께 보고하여 '진짜 돌파'인지 '가짜 돌파'인지 판단 근거를 제공합니다.

캐빈 (총장): 하루 동안 텔레그램으로 나간 알림들을 취합해 장 마감 후 노트북LM에 '오늘의 특이사항'으로 자동 기록합니다.